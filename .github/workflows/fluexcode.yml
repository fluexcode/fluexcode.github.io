name: ğŸš€ FluexCode Bot

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ KodlarÄ± Ã‡ek
      uses: actions/checkout@v3
      
    - name: âš™ï¸ Node.js Kur
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        
    - name: ğŸ“¦ BaÄŸÄ±mlÄ±lÄ±klarÄ± YÃ¼kle
      run: npm install
      
    - name: ğŸ”§ .fluexcode-env OluÅŸtur
      run: |
        echo "FLUEXCODE_USERNAME=${{ secrets.FLUEXCODE_USERNAME }}" > .fluexcode-env
        echo "FLUEXCODE_OAUTH=${{ secrets.FLUEXCODE_OAUTH }}" >> .fluexcode-env
        echo "FLUEXCODE_CHANNEL=${{ secrets.FLUEXCODE_CHANNEL }}" >> .fluexcode-env
        echo "FLUEXCODE_PREFIX=!" >> .fluexcode-env
        
    - name: ğŸ§ª Dosya KontrolÃ¼
      run: |
        echo "ğŸ“ Mevcut dosyalar:"
        ls -la
        echo ""
        echo "ğŸ“„ .fluexcode-env:"
        cat .fluexcode-env || echo "Dosya yok"
        
    - name: ğŸš€ Botu BaÅŸlat
      run: |
        # Botu baÅŸlat
        npm start &
        sleep 10
        echo "âœ… FluexCode Bot baÅŸlatÄ±ldÄ±"
        
    - name: ğŸ”„ SÃ¼rekli Ã‡alÄ±ÅŸtÄ±r
      run: |
        echo "ğŸ”„ Bot 7/24 Ã§alÄ±ÅŸacak..."
        while true; do
          sleep 60
          echo "â° $(date): FluexCode Bot aktif"
        done
